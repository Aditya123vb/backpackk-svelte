import{s as c,e as l,c as m,g as f,h,i as p,n as s,f as u,w as d}from"../chunks/scheduler.Bt1ZmQP3.js";import{S as g,i as y}from"../chunks/index.BTw-nfef.js";import{g as i}from"../chunks/entry.C5NOW2QF.js";import"../chunks/history.MX8oQUlL.js";/* empty css                    */function k(o){let t,a='<h1 class="text-white text-xl">Loading...</h1>';return{c(){t=l("body"),t.innerHTML=a,this.h()},l(n){t=m(n,"BODY",{class:!0,"data-svelte-h":!0}),f(t)!=="svelte-qnzbwy"&&(t.innerHTML=a),this.h()},h(){h(t,"class","w-full h-screen bg-[#1b1b1b] items-center justify-center")},m(n,e){p(n,t,e)},p:s,i:s,o:s,d(n){n&&u(t)}}}function w(o){localStorage.setItem("authToken",o)}function _(o){localStorage.setItem("name",o)}function b(o){d(()=>{const e=new URLSearchParams(window.location.search).get("token");console.log(typeof e),a(e)});let t={temptoken:""};async function a(n){t.temptoken=n;try{const e=await fetch("http://127.0.0.1:8000/verifytemp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(e.ok){const r=await e.json();w(r.access_token),_(r.first_name),i("/parameters/cityname")}}catch(e){console.error("Invalid token",e),i("/login")}}return[]}class L extends g{constructor(t){super(),y(this,t,b,k,c,{})}}export{L as component};
